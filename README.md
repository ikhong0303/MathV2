# MathV2

## 카드 분배 로직 개요

MathV2는 라운드마다 플레이어와 AI에게 카드를 나누어 주며, 다음 규칙을 따릅니다.

1. **기본 연산자 고정 제공**: `+`, `-`, `÷` 연산자 카드 3장을 항상 먼저 지급합니다.
2. **초기 3장 공개**: 덱에서 우선 3장을 연속으로 뽑아 플레이어에게 바로 공개합니다. 이때 특수 카드(`×`, `√`)가 포함될 수 있습니다.
3. **숫자 카드 보충**: 공개된 카드 중 특수 카드 때문에 숫자가 3장 미만이라면, 숫자 카드가 정확히 3장이 될 때까지 계속 뽑아 즉시 추가합니다. 보충 과정에서 다시 특수 카드가 나오면 그대로 공개하고, 숫자가 채워질 때까지 반복합니다.

위 규칙은 `Assets/Scripts/Controllers/RoundController.cs` 파일의 `DealCardsToPlayer()` 및 `DealCardsToAI()` 코루틴에서 구현되어 있습니다.

## 버그 수정 내역

- **문제 현상**: 초기 3장을 숫자로 모두 받았는데도 이후에 특수 카드와 추가 숫자가 연이어 지급되어 최종적으로 숫자가 4장 이상이 되는 경우가 있었습니다.
- **해결 방법**: 카드 분배 과정을 "초기 3장 공개 → 숫자 카드 보충" 두 단계로 명확히 분리했습니다. 이제 특수 카드는 등장 즉시 공개되지만, 숫자 카드는 정확히 3장만 유지되도록 즉시 보충하며, 동일한 로직이 플레이어와 AI 모두에게 적용됩니다.

## 테스트 방법

Unity 에디터에서 `RoundController`가 포함된 씬을 실행하여 새 라운드를 반복적으로 시작하면, 다음을 확인할 수 있습니다.

1. 덱에서 순차적으로 3장을 공개한 뒤, 숫자 카드가 3장이 되도록 즉시 보충합니다.
2. 특수 카드는 등장 시점에 바로 공개되며, 그만큼 숫자가 부족하다면 즉시 추가 숫자가 지급됩니다.
3. 특수 카드가 등장하지 않으면 처음 공개한 3장의 숫자 카드만 유지됩니다.

필요에 따라 `DeckService` 생성자에 시드를 전달하여 재현 가능한 순서를 테스트할 수 있습니다.

